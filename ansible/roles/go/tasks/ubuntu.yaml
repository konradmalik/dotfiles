- name: install go apt packages
  become: yes
  apt:
    name:
      - golang
    state: latest
    update_cache: yes
    autoclean: yes
    autoremove: yes

- name: install tiny go from git
  become: yes
  shell:
    chdir: /tmp
    cmd: |
      curl -Lo tinygo.deb https://github.com/tinygo-org/tinygo/releases/download/v{{ git_versions.tinygo }}/tinygo_{{ git_versions.tinygo }}_amd64.deb
      dpkg -i tinygo.deb
    creates: "/usr/local/bin/tinygo"
  when: ansible_architecture == "x86_64"
