# nix-zsh-completions start
zsh_add_plugin "spwhitt/nix-zsh-completions"

# fzf config
export FZF_DEFAULT_COMMAND="fd --type f"
export FZF_DEFAULT_OPTS="--bind 'ctrl-a:select-all,ctrl-d:deselect-all,ctrl-t:toggle-all' --preview 'bat --color=always --style=numbers --line-range=:200 {}'"

# source zsh plugins that vary by platform
if [ "$(uname)" = "Darwin" ]; then
    source ~/.fzf.zsh

    source "$BREW_PREFIX/share/zsh-autosuggestions/zsh-autosuggestions.zsh"
    source "$BREW_PREFIX/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh"
elif [ "$(uname)" = "Linux" ]; then
    if [ -f "/etc/arch-release" ]; then
        # fzf
        source "/usr/share/fzf/key-bindings.zsh"
        source "/usr/share/fzf/completion.zsh"

        source "/usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh"
        source "/usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh"
    elif [ -f "/etc/debian_version" ]; then
        # fzf
        source "/usr/share/doc/fzf/examples/key-bindings.zsh"
        source "/usr/share/doc/fzf/examples/completion.zsh"

        source "/usr/share/zsh-autosuggestions/zsh-autosuggestions.zsh"
        source "/usr/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh"
    fi
fi
